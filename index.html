<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Awwabim Laundry</title>

<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>

<style>
body{
  margin:0;
  font-family:Segoe UI,Arial;
  background:linear-gradient(135deg,#fceabb,#f8b500);
}
.container{
  max-width:1000px;
  margin:auto;
  background:#fff;
  padding:15px;
  border-radius:12px;
}
h2{margin-top:10px;color:#2c3e50}

.main-nav{
  display:flex;
  gap:10px;
  overflow-x:auto;
}
.nav-item{
  text-decoration:none;
  padding:8px 12px;
  font-weight:bold;
  color:#555;
}
.nav-item.active{
  color:#e67e22;
  border-bottom:3px solid #e67e22;
}

.tab-content{display:none}
.tab-content.active{display:block}

form{
  display:flex;
  flex-direction:column;
  gap:12px;
}

input{
  padding:10px;
  border-radius:6px;
  border:1px solid #ccc;
}

.btn-group{
  display:flex;
  gap:10px;
}
.btn{
  flex:1;
  padding:12px;
  border:none;
  color:#fff;
  font-weight:bold;
  border-radius:6px;
}
.btn-jemput{background:#27ae60}
.btn-antar{background:#3498db}

.info-status{
  display:none;
  margin-top:10px;
  padding:10px;
  border-radius:6px;
  font-weight:bold;
  text-align:center;
}
.info-jemput{
  background:#e9f7ef;
  color:#27ae60;
  border:1px solid #27ae60;
}
.info-antar{
  background:#eaf2fb;
  color:#3498db;
  border:1px solid #3498db;
}

.table-wrapper{width:100%;overflow-x:auto}
table{
  width:100%;
  border-collapse:collapse;
}
th,td{
  padding:8px;
  border-bottom:1px solid #eee;
  font-size:.9em;
}
th{
  background:#2c3e50;
  color:#fff;
}

.status{
  padding:4px 8px;
  border-radius:12px;
  font-size:.8em;
  color:#fff;
}
.menunggu{background:#f39c12}
.proses{background:#e74c3c}
.selesai{background:#27ae60}

@media(max-width:600px){
  .btn-group{flex-direction:column}
}
</style>
</head>

<body>
<div class="container">

<nav class="main-nav">
  <a href="#" class="nav-item active" data-tab="input">Order Baru</a>
  <a href="#" class="nav-item" data-tab="aktif">Pesanan Aktif</a>
</nav>

<!-- INPUT -->
<div id="input" class="tab-content active">
<h2>Input Pesanan</h2>
<form id="form">
  <input id="nama" placeholder="Nama pelanggan">
  <input id="wa" placeholder="WhatsApp (08xxx)">
  <div class="btn-group">
    <button type="button" class="btn btn-jemput" onclick="simpanPesanan('JEMPUT')">ðŸ§º JEMPUT</button>
    <button type="button" class="btn btn-antar" onclick="simpanPesanan('ANTAR')">ðŸšš ANTAR</button>
  </div>
  <div id="infoStatus" class="info-status"></div>
</form>
</div>

<!-- AKTIF -->
<div id="aktif" class="tab-content">
<h2>Pesanan Aktif</h2>
<div class="table-wrapper">
<table>
<thead>
<tr>
<th>Waktu</th>
<th>Nama</th>
<th>Layanan</th>
<th>Status</th>
</tr>
</thead>
<tbody id="list">
<tr><td colspan="4">Memuat...</td></tr>
</tbody>
</table>
</div>
</div>

</div>

<script>
/* FIREBASE */
firebase.initializeApp({
 apiKey: "AIzaSyA-1GyDIS77tlL0vpiZS_ZLvx1S71TnkQU",
 databaseURL: "https://awwabim-laundry-default-rtdb.firebaseio.com/"
});
const db=firebase.database().ref("pesanan");

/* NAV */
document.querySelectorAll(".nav-item").forEach(n=>{
 n.onclick=e=>{
  e.preventDefault();
  document.querySelectorAll(".nav-item").forEach(x=>x.classList.remove("active"));
  n.classList.add("active");
  document.querySelectorAll(".tab-content").forEach(t=>t.classList.remove("active"));
  document.getElementById(n.dataset.tab).classList.add("active");
 }
});

/* SIMPAN */
function simpanPesanan(layanan){
 let nama=document.getElementById("nama").value.trim();
 let wa=document.getElementById("wa").value.trim();
 let info=document.getElementById("infoStatus");

 if(!nama||!wa){
  info.style.display="block";
  info.className="info-status";
  info.innerText="Nama & WhatsApp wajib diisi";
  return;
 }

 if(wa.startsWith("0")) wa="62"+wa.slice(1);

 db.push({
  nama:nama,
  wa:wa,
  layanan:layanan,
  status:"MENUNGGU",
  waktu:Date.now()
 });

 info.style.display="block";
 if(layanan==="JEMPUT"){
  info.className="info-status info-jemput";
  info.innerText="âœ… Pesanan JEMPUT berhasil disimpan";
 }else{
  info.className="info-status info-antar";
  info.innerText="ðŸšš Pesanan ANTAR berhasil disimpan";
 }

 document.getElementById("form").reset();
}

/* LIST */
db.on("value",s=>{
 let html="";
 s.forEach(d=>{
  let v=d.val();
  let jam=new Date(v.waktu).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"});
  html+=`
  <tr>
    <td>${jam}</td>
    <td>${v.nama}</td>
    <td>${v.layanan}</td>
    <td><span class="status menunggu">${v.status}</span></td>
  </tr>`;
 });
 document.getElementById("list").innerHTML=html||"<tr><td colspan=4>Kosong</td></tr>";
});
</script>
</body>
</html>
