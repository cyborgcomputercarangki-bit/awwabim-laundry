<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Awwabim Laundry - Admin</title>

<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>

<style>
body{
 margin:0;
 font-family:Segoe UI,Arial;
 background:linear-gradient(135deg,#fceabb,#f8b500);
}
.container{
 max-width:1000px;
 margin:auto;
 background:#fff;
 padding:15px;
 border-radius:12px;
 box-shadow:0 6px 15px rgba(0,0,0,.2);
}
h1{margin:0;color:#2c3e50}

#loginBar,#logoutBar{
 padding:10px;
 background:#fffbe6;
 border-bottom:1px solid #ddd;
}
#logoutBar{background:#eafaf1;display:none}

nav{display:flex;gap:10px;margin:15px 0}
nav button{
 flex:1;padding:10px;border:none;border-radius:6px;
 font-weight:bold;background:#ecf0f1
}
nav button.active{background:#e67e22;color:#fff}

section{display:none}
section.active{display:block}

input{
 width:100%;padding:12px;margin-bottom:10px;
 border-radius:6px;border:1px solid #ccc
}
.btn{
 padding:12px;border:none;border-radius:6px;
 font-weight:bold;color:#fff
}
.btn-jemput{background:#27ae60}
.btn-antar{background:#3498db}

table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{padding:8px;border-bottom:1px solid #ddd;text-align:center}
th{background:#2c3e50;color:#fff}

.status{
 padding:5px 10px;border-radius:20px;
 font-size:12px;font-weight:bold;color:#fff
}
.MENUNGGU_DRIVER{background:#f39c12}
.PROSES_CUCI{background:#e74c3c}
.PROSES_ANTAR{background:#3498db}
.SELESAI{background:#27ae60}

.toast{
 position:fixed;bottom:20px;right:20px;
 background:#333;color:#fff;
 padding:15px;border-radius:8px;
 display:none;z-index:9999
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginBar">
 <input id="namaAdmin" placeholder="Nama admin" style="width:70%">
 <button onclick="loginAdmin()">LOGIN</button>
</div>

<div id="logoutBar">
 Login sebagai: <b id="adminName"></b>
 <button onclick="logoutAdmin()" style="float:right">LOGOUT</button>
</div>

<div class="container">
<h1>ðŸ§º Awwabim Laundry â€“ ADMIN</h1>

<nav>
 <button class="active" onclick="openTab('input',this)">Order Baru</button>
 <button onclick="openTab('aktif',this)">Pesanan Aktif</button>
 <button onclick="openTab('history',this)">History</button>
</nav>

<section id="input" class="active">
 <input id="nama" placeholder="Nama Pelanggan">
 <input id="wa" placeholder="WhatsApp">
 <input id="driver" placeholder="Nama Driver">
 <button class="btn btn-jemput" onclick="submitPesanan('JEMPUT')">ðŸ§º JEMPUT</button>
 <br><br>
 <button class="btn btn-antar" onclick="submitPesanan('ANTAR')">ðŸšš ANTAR</button>
</section>

<section id="aktif">
<table>
<thead>
<tr>
 <th>Waktu</th>
 <th>Nama</th>
 <th>Layanan</th>
 <th>Status</th>
 <th>Aksi</th>
</tr>
</thead>
<tbody id="listAktif"></tbody>
</table>
</section>

<section id="history">
<table>
<thead>
<tr>
 <th>Waktu</th>
 <th>Nama</th>
 <th>Layanan</th>
 <th>Status</th>
</tr>
</thead>
<tbody id="listHistory"></tbody>
</table>
</section>
</div>

<div id="toast" class="toast"></div>

<script>
/* FIREBASE */
firebase.initializeApp({
 apiKey:"AIzaSyA-1GyDIS77tlL0vpiZS_ZLvx1S71TnkQU",
 databaseURL:"https://awwabim-laundry-default-rtdb.firebaseio.com"
});
const db=firebase.database();
const Pesanan=db.ref("Pesanan");
const Notif=db.ref("Notifikasi");

/* LOGIN */
const admin=localStorage.getItem("admin");
if(admin){
 loginBar.style.display="none";
 logoutBar.style.display="block";
 adminName.innerText=admin;
}
function loginAdmin(){
 let n=namaAdmin.value.trim();
 if(!n) return alert("Nama wajib diisi");
 localStorage.setItem("admin",n);
 loginBar.style.display="none";
 logoutBar.style.display="block";
 adminName.innerText=n;
}
function logoutAdmin(){
 localStorage.removeItem("admin");
 location.reload();
}

/* UI */
function openTab(id,btn){
 document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
 document.getElementById(id).classList.add("active");
 document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active"));
 btn.classList.add("active");
}
function toast(msg){
 const t=document.getElementById("toast");
 t.innerText=msg;
 t.style.display="block";
 setTimeout(()=>t.style.display="none",3000);
}

/* SUBMIT */
function submitPesanan(layanan){
 const nama=nama.value.trim();
 const wa=wa.value.trim();
 const driver=dr
