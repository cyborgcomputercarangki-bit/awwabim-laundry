<!-- ======================= ADMIN.HTML ======================= -->
<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ADMIN AWWABIM LAUNDRY</title>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>
<style>
body{margin:0;font-family:Arial;background:#f2f2f2}
header{background:#2c3e50;color:#fff;padding:15px;text-align:center;font-weight:bold}
.container{padding:10px}
.card{background:#fff;border-radius:8px;padding:10px;margin-bottom:10px;box-shadow:0 2px 5px rgba(0,0,0,.1)}
button{padding:8px 12px;border:none;border-radius:5px;color:#fff;font-weight:bold}
.btn-jemput{background:#27ae60}
.btn-antar{background:#3498db}
.btn-next{background:#e67e22}
.badge{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:bold}
.wait{background:#f1c40f}
.process{background:#e67e22;color:#fff}
.done{background:#27ae60;color:#fff}
.toast{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#333;color:#fff;padding:10px 20px;border-radius:20px;display:none}
</style>
</head>
<body>
<header>ADMIN AWWABIM LAUNDRY</header>
<div class="container">
<div class="card">
<h3>Order Baru</h3>
<input id="nama" placeholder="Nama Pelanggan"><br><br>
<input id="wa" placeholder="WhatsApp"><br><br>
<button class="btn-jemput" onclick="buatOrder('JEMPUT')">JEMPUT</button>
<button class="btn-antar" onclick="buatOrder('ANTAR')">ANTAR</button>
</div>
<div class="card"><h3>Pesanan Aktif</h3><div id="list"></div></div>
<div class="card"><h3>History</h3><div id="history"></div></div>
</div>
<div id="toast" class="toast"></div>
<script>
const firebaseConfig={apiKey:"AIzaSyA-1GyDIS77tlL0vpiZS_ZLvx1S71TnkQU",databaseURL:"https://awwabim-laundry-default-rtdb.firebaseio.com/"};
firebase.initializeApp(firebaseConfig);
const db=firebase.database();
function toast(msg){const t=document.getElementById('toast');t.innerText=msg;t.style.display='block';setTimeout(()=>t.style.display='none',3000)}
function buatOrder(tipe){const nama=document.getElementById('nama').value;const wa=document.getElementById('wa').value;if(!nama||!wa)return toast('Lengkapi data');db.ref('orders').push({nama,wa,tipe,status:'MENUNGGU',driver:'-',time:Date.now()});toast('Order dibuat')}
db.ref('orders').on('value',s=>{const list=document.getElementById('list');const his=document.getElementById('history');list.innerHTML='';his.innerHTML='';s.forEach(c=>{const o=c.val();const el=document.createElement('div');el.className='card';el.innerHTML=`<b>${o.nama}</b> (${o.tipe})<br>Status: <span class="badge ${o.status=='SELESAI'?'done':o.status=='PROSES'?'process':'wait'}">${o.status}</span><br>Driver: ${o.driver||'-'}<br>`;if(o.status!='SELESAI'){const b=document.createElement('button');b.className='btn-next';b.innerText='Next';b.onclick=()=>db.ref('orders/'+c.key).update({status:o.status=='MENUNGGU'?'PROSES':'SELESAI'});el.appendChild(b);list.appendChild(el)}else{his.appendChild(el)}})})
</script>
</body>
</html>